<!DOCTYPE html>
<html>
<head>
    <title>Tic Tac Toe</title>
    <style>
        body {
            margin: 0;
            min-height: 100vh;
            font-family: 'Segoe UI', Arial;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
        }

        .container {
            background: rgba(255,255,255,0.12);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px 25px;
            width: 340px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            text-align: center;
        }

        h1 {
            margin-top: 0;
            font-size: 28px;
        }

        h2 {
            font-size: 18px;
            margin-bottom: 15px;
        }

        button {
            background: linear-gradient(135deg, #ff9a9e, #fad0c4);
            border: none;
            border-radius: 30px;
            padding: 12px 20px;
            font-size: 15px;
            margin: 8px 5px;
            cursor: pointer;
            color: #333;
            font-weight: 600;
            transition: 0.3s;
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }

        button:hover {
            transform: translateY(-2px) scale(1.03);
            box-shadow: 0 12px 20px rgba(0,0,0,0.3);
        }

        .hidden {
            display: none;
        }

        .board {
            display: grid;
            grid-template-columns: repeat(3, 90px);
            gap: 12px;
            justify-content: center;
            margin: 20px auto;
        }

        .cell {
            width: 90px;
            height: 90px;
            border-radius: 16px;
            background: rgba(255,255,255,0.2);
            font-size: 42px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: 0.25s;
        }

        .cell:hover {
            background: rgba(255,255,255,0.35);
            transform: scale(1.05);
        }

        .x {
            color: #ffeb3b;
            text-shadow: 0 0 10px rgba(255,235,59,0.9);
        }

        .o {
            color: #00e5ff;
            text-shadow: 0 0 10px rgba(0,229,255,0.9);
        }

        .footer-btns {
            margin-top: 15px;
        }
    </style>
</head>
<body>

<div class="container">

    <!-- MENU -->
    <div id="menu">
        <h1>Tic Tac Toe</h1>
        <h2>Choose Game Mode</h2>
        <button onclick="startGame('friend')">ðŸ‘¥ Play with Friend</button>
        <button onclick="startGame('computer')">ðŸ¤– Play with Computer</button>
    </div>

    <!-- GAME -->
    <div id="game" class="hidden">
        <h2 id="status"></h2>
        <div class="board">
            <div class="cell" onclick="play(0)"></div>
            <div class="cell" onclick="play(1)"></div>
            <div class="cell" onclick="play(2)"></div>
            <div class="cell" onclick="play(3)"></div>
            <div class="cell" onclick="play(4)"></div>
            <div class="cell" onclick="play(5)"></div>
            <div class="cell" onclick="play(6)"></div>
            <div class="cell" onclick="play(7)"></div>
            <div class="cell" onclick="play(8)"></div>
        </div>
        <div class="footer-btns">
            <button onclick="resetGame()">Restart</button>
            <button onclick="backToMenu()">Menu</button>
        </div>
    </div>

</div>

<script>
    let board, currentPlayer, gameMode, gameActive;

    const winPatterns = [
        [0,1,2],[3,4,5],[6,7,8],
        [0,3,6],[1,4,7],[2,5,8],
        [0,4,8],[2,4,6]
    ];

    // ðŸ”Š SOUND EFFECTS (Web Audio API)
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    function playSound(freq, duration = 0.15) {
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.connect(gain);
        gain.connect(audioCtx.destination);
        osc.frequency.value = freq;
        osc.type = "sine";
        osc.start();
        gain.gain.exponentialRampToValueAtTime(
            0.0001, audioCtx.currentTime + duration
        );
        osc.stop(audioCtx.currentTime + duration);
    }

    function startGame(mode) {
        gameMode = mode;
        board = ["","","","","","","","",""];
        currentPlayer = "X";
        gameActive = true;

        document.getElementById("menu").classList.add("hidden");
        document.getElementById("game").classList.remove("hidden");
        clearBoard();
        updateStatus();
    }

    function play(index) {
        if (!gameActive || board[index] !== "") return;

        playSound(600); // click sound

        board[index] = currentPlayer;
        const cell = document.getElementsByClassName("cell")[index];
        cell.innerText = currentPlayer;
        cell.classList.add(currentPlayer === "X" ? "x" : "o");

        const winPattern = getWinPattern(currentPlayer);
        if (winPattern) {
            highlightWin(winPattern);
            document.getElementById("status").innerText =
                `ðŸŽ‰ ${currentPlayer} Wins!`;
            playSound(900, 0.4); // win sound
            gameActive = false;
            return;
        }

        if (!board.includes("")) {
            document.getElementById("status").innerText = "ðŸ˜ It's a Draw!";
            playSound(300, 0.4); // draw sound
            gameActive = false;
            return;
        }

        if (gameMode === "computer" && currentPlayer === "X") {
            currentPlayer = "O";
            updateStatus();
            setTimeout(computerMove, 500);
        } else {
            currentPlayer = currentPlayer === "X" ? "O" : "X";
            updateStatus();
        }
    }

    function computerMove() {
        let empty = board
            .map((v,i)=>v===""?i:null)
            .filter(v=>v!==null);

        let move = empty[Math.floor(Math.random()*empty.length)];
        board[move] = "O";

        const cell = document.getElementsByClassName("cell")[move];
        cell.innerText = "O";
        cell.classList.add("o");
        playSound(450);

        const winPattern = getWinPattern("O");
        if (winPattern) {
            highlightWin(winPattern);
            document.getElementById("status").innerText = "ðŸ’» Computer Wins!";
            playSound(900, 0.4);
            gameActive = false;
            return;
        }

        if (!board.includes("")) {
            document.getElementById("status").innerText = "ðŸ˜ It's a Draw!";
            playSound(300, 0.4);
            gameActive = false;
            return;
        }

        currentPlayer = "X";
        updateStatus();
    }

    function getWinPattern(player) {
        return winPatterns.find(p => p.every(i => board[i] === player));
    }

    function highlightWin(pattern) {
        pattern.forEach(i => {
            const cell = document.getElementsByClassName("cell")[i];
            cell.style.boxShadow = "0 0 25px #00ffcc";
            cell.style.transform = "scale(1.15)";
        });
    }

    function updateStatus() {
        if (gameMode === "computer") {
            document.getElementById("status").innerText =
                currentPlayer === "X" ? "Your Turn (X)" : "Computer Turn (O)";
        } else {
            document.getElementById("status").innerText =
                `Player ${currentPlayer} Turn`;
        }
    }

    function resetGame() {
        startGame(gameMode);
    }

    function backToMenu() {
        document.getElementById("game").classList.add("hidden");
        document.getElementById("menu").classList.remove("hidden");
    }

    function clearBoard() {
        Array.from(document.getElementsByClassName("cell")).forEach(c=>{
            c.innerText="";
            c.classList.remove("x","o");
            c.style.boxShadow = "none";
            c.style.transform = "scale(1)";
        });
    }
</script>


</body>
</html>
